(ns tech.thomas-sojka.plolj.bottle
  (:require [reagent.core :as r]
            [tech.thomas-sojka.plolj.borders :refer [divider-2]]
            [tech.thomas-sojka.plolj.components :refer [drawing-canvas]]
            [tech.thomas-sojka.plolj.utils :refer [scale tr-and translate]]
            [tech.thomas-sojka.plolj.wedding-dict
             :refer
             [dict load-private-dict load-time-table time-table]]))

;; Size 9 x 11 ; cusutomized size 76
(def width  (* 21 50))
(def height (* 29.7 50))

(def icons
  {:cutlery "M11.415 12.393l1.868-2.289c.425-.544.224-.988-.055-2.165-.205-.871-.044-1.854.572-2.5 1.761-1.844 5.343-5.439 5.343-5.439l.472.37-3.693 4.728.79.617 3.87-4.59.479.373-3.558 4.835.79.618 3.885-4.58.443.347-3.538 4.85.791.617 3.693-4.728.433.338s-2.55 4.36-3.898 6.535c-.479.771-1.425 1.161-2.334 1.167-1.211.007-1.685-.089-2.117.464l-2.281 2.795c2.445 2.962 4.559 5.531 5.573 6.829.771.987.065 2.421-1.198 2.421-.42 0-.853-.171-1.167-.573l-8.36-10.072s-.926.719-1.944 1.518c-3.172-5.184-6.267-11.661-6.267-13.955 0-.128-.034-.924.732-.924.245 0 .493.116.674.344.509.642 5.415 6.513 10.002 12.049m-2.952 3.617l1.953 2.365-4.115 5.055c-.295.378-.736.576-1.182.576-1.198 0-1.991-1.402-1.189-2.428l4.533-5.568z"
   :calendar "M20 20h-4v-4h4v4zm-6-10h-4v4h4v-4zm6 0h-4v4h4v-4zm-12 6h-4v4h4v-4zm6 0h-4v4h4v-4zm-6-6h-4v4h4v-4zm16-8v22h-24v-22h3v1c0 1.103.897 2 2 2s2-.897 2-2v-1h10v1c0 1.103.897 2 2 2s2-.897 2-2v-1h3zm-2 6h-20v14h20v-14zm-2-7c0-.552-.447-1-1-1s-1 .448-1 1v2c0 .552.447 1 1 1s1-.448 1-1v-2zm-14 2c0 .552-.447 1-1 1s-1-.448-1-1v-2c0-.552.447-1 1-1s1 .448 1 1v2z"
   :phone "M20 22.621l-3.521-6.795c-.008.004-1.974.97-2.064 1.011-2.24 1.086-6.799-7.82-4.609-8.994l2.083-1.026-3.493-6.817-2.106 1.039c-7.202 3.755 4.233 25.982 11.6 22.615.121-.055 2.102-1.029 2.11-1.033z"
   :mail "M0 3v18h24v-18h-24zm6.623 7.929l-4.623 5.712v-9.458l4.623 3.746zm-4.141-5.929h19.035l-9.517 7.713-9.518-7.713zm5.694 7.188l3.824 3.099 3.83-3.104 5.612 6.817h-18.779l5.513-6.812zm9.208-1.264l4.616-3.741v9.348l-4.616-5.607z"
   :champagne "M 12.196723,3.0316745 C 12.136325,2.8420921 12.049084,2.6625761 11.936677,2.4948041 11.82427,2.3270322 11.604488,2.0669855 11.279011,1.7146644 11.040775,1.4562957 10.893136,1.2918791 10.837771,1.2214149 10.747174,1.1073299 10.681743,1.004989 10.641477,0.90935898 c -0.04026,-0.0939523 -0.0604,-0.18958227 -0.05872,-0.28689004 0.0017,-0.17783834 0.0755,-0.3271553 0.224815,-0.4462734 0.147639,-0.1191181 0.33051,-0.1778383 0.550292,-0.176160581239 C 11.57429,0.00171268 11.762194,0.06546604 11.923255,0.19297273 c 0.120795,0.0939523 0.218103,0.23320303 0.291921,0.4194299 0.06543,-0.17951584 0.157708,-0.31541128 0.276825,-0.4110413 0.166093,-0.12918441 0.355676,-0.19293776 0.570425,-0.19126004 0.216425,0.0016777 0.399297,0.06207563 0.548614,0.18287144 0.149318,0.12079582 0.223137,0.26172424 0.221459,0.42614077 -0.0016,0.1459616 -0.0453,0.29695645 -0.13254,0.4529843 -0.08724,0.1543502 -0.258368,0.3607099 -0.513382,0.6157231 -0.328835,0.3305107 -0.568747,0.6023013 -0.719742,0.8153718 -0.117439,0.1677719 -0.208036,0.3439323 -0.270112,0.5284818 z m 9.129002,18.9926375 a 0.25165865,0.25165865 0 0 0 -0.06642,0.01478 l -3.712543,1.46877 A 0.25165865,0.25165865 0 0 0 17.399144,23.84 a 0.25165865,0.25165865 0 0 0 0.332134,0.140234 l 3.712543,-1.476159 a 0.25165865,0.25165865 0 0 0 0.140238,-0.324755 0.25165865,0.25165865 0 0 0 -0.258326,-0.154998 z m -4.133248,-5.535601 -0.46499,0.18452 2.575899,6.517248 0.464992,-0.184521 z m -1.48354,-10.3847879 -4.657286,1.8156772 0.0738,0.2288045 c 0,0 0.808603,2.3652832 1.919007,4.6277622 0.555203,1.13124 1.184212,2.234142 1.845202,3.018748 0.330494,0.392305 0.666449,0.706882 1.025931,0.900459 0.359481,0.193578 0.762526,0.262208 1.136643,0.118093 0.374118,-0.143952 0.626066,-0.462911 0.767604,-0.848794 0.141537,-0.38588 0.186732,-0.849085 0.177138,-1.365447 C 17.9778,13.566503 17.724087,12.315534 17.399136,11.093345 16.749233,8.6489658 15.804884,6.3327276 15.804884,6.3327276 Z m -0.287852,0.6495105 c 0.08659,0.2144377 0.884063,2.1902792 1.490923,4.4727664 0.319504,1.201694 0.565306,2.430841 0.583083,3.387787 0.0089,0.478473 -0.03954,0.886298 -0.147618,1.180928 -0.108067,0.294631 -0.258701,0.461125 -0.47975,0.54618 -0.221476,0.08532 -0.44372,0.05802 -0.715939,-0.08857 C 15.879565,16.105939 15.579198,15.840447 15.273468,15.47754 14.662011,14.751729 14.040495,13.666825 13.494696,12.554743 12.45424,10.434791 11.764195,8.4045677 11.69378,8.2000704 Z M 3.1394315,19.979831 a 0.25165865,0.25165865 0 0 0 -0.2288057,0.184519 0.25165865,0.25165865 0 0 0 0.1697585,0.309993 l 3.8380168,1.10712 A 0.25165865,0.25165865 0 0 0 7.2283948,21.411706 0.25165865,0.25165865 0 0 0 7.0586349,21.101711 l -3.8380152,-1.1145 a 0.25165865,0.25165865 0 0 0 -0.081188,-0.0074 z M 6.7560229,14.082569 4.8074924,20.81386 5.2872431,20.954094 7.2357753,14.222802 Z M 7.6195789,3.68302 7.5383888,3.9118247 c 0,0 -0.8084964,2.3655232 -1.3137818,4.8344252 -0.2526429,1.2344512 -0.4340763,2.4955311 -0.3911839,3.5206421 0.021465,0.512555 0.099882,0.962794 0.265707,1.335927 0.1658289,0.373131 0.4427381,0.674597 0.826651,0.789743 0.3840986,0.114942 0.773808,0.01943 1.1218811,-0.199279 0.3480768,-0.218715 0.6733415,-0.559872 0.9816491,-0.974267 0.616614,-0.828791 1.1848947,-1.971117 1.6754417,-3.13684 C 11.685848,7.7507277 12.35067,5.3363198 12.35067,5.3363198 L 12.417095,5.100134 Z M 7.959094,4.3030076 11.78235,5.4322701 C 11.721189,5.6496232 11.157121,7.702904 10.239763,9.8828934 9.7574418,11.029067 9.1947361,12.155806 8.6233672,12.923785 8.3376831,13.307772 8.0477362,13.598191 7.7819551,13.765195 7.5161742,13.9322 7.2930259,13.973361 7.0660187,13.905431 6.8388201,13.837286 6.6823593,13.68619 6.5567435,13.403536 6.431126,13.120881 6.3551587,12.71893 6.3353181,12.244749 6.2956366,11.29639 6.4707537,10.063133 6.7191197,8.8495812 7.1921362,6.5383581 7.8885391,4.5114293 7.959094,4.3030076 Z"
   :marriage "M 8.148437,2.6 C 3.652382,2.600001 -9.9999979e-7,6.2543365 0,10.750391 c 0,4.496055 3.652382,8.15039 8.148437,8.150391 0.836742,0 1.643991,-0.128273 2.404297,-0.363282 1.280526,1.754488 3.327045,2.920281 5.662109,2.97461 3.983681,0.09454 7.29804,-3.067193 7.392578,-7.050781 0.04656,-1.962029 -0.699045,-3.759197 -1.941406,-5.0917973 -0.0021,5.815e-4 -0.0038,0.00137 -0.0059,0.00195 v -0.00781 c 0.0019,0.00201 0.004,0.00384 0.0059,0.00586 0.247662,-0.069764 0.601848,-0.1308525 1.060547,-0.1796875 0.354052,-0.036626 0.613399,-0.089765 0.777344,-0.1542969 0.163946,-0.064532 0.292325,-0.1540026 0.384765,-0.265625 0.10288,-0.1255752 0.13386,-0.2799692 0.09375,-0.4648437 -0.04012,-0.1848746 -0.142904,-0.3444289 -0.308593,-0.4804687 -0.163946,-0.13604 -0.351046,-0.2074475 -0.558594,-0.2109375 -0.151737,-0.00174 -0.306549,0.046861 -0.46875,0.1445312 0.0593,-0.1883628 0.07025,-0.3556577 0.03711,-0.5039062 C 22.639994,7.05547 22.534831,6.8883841 22.369141,6.7523443 22.201708,6.6145604 22.0243,6.545313 21.835938,6.545313 c -0.186619,0 -0.33955,0.067085 -0.451172,0.203125 -0.06104,0.073252 -0.104902,0.1601425 -0.132812,0.2578125 -0.0279,0.09767 -0.04297,0.218312 -0.04297,0.3613281 -0.0018,0.088949 0.0086,0.305268 0.03125,0.6523438 0.02787,0.4459426 0.03122,0.7467799 0.01758,0.9492187 h -0.002 c -1.243708,-1.1394334 -2.883499,-1.8573 -4.699219,-1.9003906 -0.378213,-0.00898 -0.747331,0.020716 -1.111328,0.068359 C 14.110859,4.4523632 11.34581,2.6 8.148392,2.6 Z m 0,0.873047 c 2.777015,0 5.186475,1.5498553 6.414063,3.8320316 -3.039557,0.7938315 -5.32222,3.5205754 -5.400391,6.8144534 -0.031358,1.321898 0.30185,2.565273 0.898437,3.646484 -0.610147,0.165469 -1.249043,0.261719 -1.912109,0.261719 -4.024764,0 -7.277344,-3.25258 -7.277344,-7.277344 0,-4.0247639 3.25258,-7.277344 7.277344,-7.277344 z m 8.386719,4.4667973 c 3.512553,0.08336 6.282576,2.9894917 6.199218,6.5019527 -0.08336,3.512554 -2.987538,6.282577 -6.5,6.199219 -1.972244,-0.04589 -3.711378,-0.982085 -4.841796,-2.416016 2.88428,-1.256197 4.90625,-4.131726 4.90625,-7.474609 0,-0.9785954 -0.180806,-1.9133612 -0.498047,-2.783203 0.241663,-0.021945 0.485836,-0.033242 0.734375,-0.027344 z m -1.607422,0.171875 c 0.318281,0.8184908 0.5,1.7065274 0.5,2.6386717 0,3.050186 -1.870243,5.654733 -4.527344,6.738281 -0.572161,-0.981337 -0.894218,-2.125794 -0.865234,-3.347656 0.0702,-2.95783 2.143078,-5.3844688 4.892578,-6.0292967 z"
   :cake "m 11.138673,1.3164062 c -0.230921,-0.00197 -0.422224,0.061205 -0.576172,0.1855469 -0.153948,0.1263157 -0.232375,0.2812706 -0.234375,0.4667969 0,0.1006579 0.02105,0.2020974 0.0625,0.3007812 0.04145,0.098684 0.112294,0.2057977 0.207031,0.3242188 0.05724,0.073026 0.210301,0.2452302 0.458985,0.515625 0.339475,0.3690789 0.569079,0.6427221 0.6875,0.8164062 0.118422,0.1736843 0.208328,0.3612048 0.271484,0.5605469 0.06513,-0.1934211 0.160835,-0.377097 0.283204,-0.5507812 0.157894,-0.2230263 0.408532,-0.508121 0.751953,-0.8535157 0.266448,-0.2664473 0.444366,-0.4807359 0.535156,-0.6425781 0.09276,-0.1638157 0.138625,-0.3226356 0.140625,-0.4746093 0.002,-0.1717105 -0.07455,-0.3189967 -0.230469,-0.4453126 C 13.340174,1.3932158 13.148852,1.330095 12.921876,1.328125 12.698852,1.3261514 12.499858,1.3931332 12.326173,1.5273438 12.199858,1.626028 12.102258,1.7675781 12.035158,1.9550781 11.95621,1.7616571 11.856785,1.6162621 11.73047,1.5175781 11.56468,1.3853413 11.365647,1.3183764 11.138673,1.3164062 Z M 8.6894542,5.8183594 c -0.3718275,0 -0.6679012,0.2788393 -0.8632812,0.6542968 -0.1953801,0.3754578 -0.3085938,0.8711636 -0.3085938,1.4160157 -0.0015,0.5167845 -0.01092,0.8923587 -0.00586,1.171875 0.00387,0.2136393 0.021957,0.3654838 0.0625,0.5019531 H 6.5039074 c -0.5248639,0 -0.9835453,0.3324162 -1.296875,0.824219 -0.3133298,0.491802 -0.4980469,1.152141 -0.4980469,1.876953 0,0.713997 -0.00287,1.227436 0.019531,1.607422 0.019813,0.33612 0.064932,0.564782 0.1699219,0.75 h -1.644531 c -0.5215241,0 -0.9744969,0.332676 -1.2851563,0.824218 -0.1801,0.284965 -0.3108887,0.63165 -0.3945312,1.009766 a 0.29101563,0.40429688 0 0 0 -0.058594,0.244141 0.29101563,0.40429688 0 0 0 0.00195,0.04102 c -0.026868,0.188409 -0.042969,0.381428 -0.042969,0.582032 a 0.19738824,0.19738824 0 0 0 0,0.002 c 0.0054,0.690294 -0.011018,1.190663 -0.00977,1.5625 0.00109,0.321345 0.019878,0.540856 0.095703,0.730469 H 0.29687614 A 0.29605263,0.29605263 0 0 0 1.1425888e-6,19.914062 0.29605263,0.29605263 0 0 0 0.29687614,20.208984 H 11.738283 v 1.732422 a 0.29605249,0.29605249 0 0 0 0.002,0.0293 h -1.3125 a 0.29605249,0.29605249 0 0 0 -0.296875,0.294922 0.29605249,0.29605249 0 0 0 0.296875,0.296875 h 3.259766 a 0.29605249,0.29605249 0 0 0 0.296874,-0.296875 0.29605249,0.29605249 0 0 0 -0.296874,-0.294922 h -1.359376 a 0.29605249,0.29605249 0 0 0 0.002,-0.0293 v -1.732422 h 11.373046 a 0.29605263,0.29605263 0 0 0 0.296876,-0.294922 0.29605263,0.29605263 0 0 0 -0.296876,-0.296874 h -1.291015 c 0.07593,-0.183814 0.09916,-0.398052 0.09961,-0.710938 5.36e-4,-0.373699 -0.02193,-0.879485 -0.0293,-1.585938 -6.6e-5,-0.135536 -0.01214,-0.266426 -0.02539,-0.396484 -2.6e-4,-0.0026 2.63e-4,-0.0053 0,-0.0078 -1.32e-4,-0.0013 1.33e-4,-0.0026 0,-0.0039 a 0.140625,0.40820313 0 0 0 -0.0039,-0.08203 0.140625,0.40820313 0 0 0 0,-0.002 c 0.01272,-0.04042 0.02734,-0.0806 0.02734,-0.125 0,-0.0594 -0.01641,-0.112987 -0.03906,-0.164063 a 0.36914063,0.46484375 0 0 0 -0.0957,-0.214843 c -0.08389,-0.324641 -0.199111,-0.626328 -0.357422,-0.876953 -0.31062,-0.491749 -0.765437,-0.826172 -1.28711,-0.826172 h -1.515625 c 0.124304,-0.198968 0.159339,-0.450159 0.175782,-0.8125 0.01689,-0.372283 0.0083,-0.86878 0.0039,-1.544922 0,-0.724812 -0.184717,-1.385151 -0.498047,-1.876953 C 18.553864,9.8949052 18.097131,9.5625 17.572267,9.5625 h -1.017578 c 0.05068,-0.1493389 0.06755,-0.3167159 0.07227,-0.5507812 0.0055,-0.2749352 -9.7e-4,-0.6357914 0,-1.1230469 0,-0.1269245 -0.02524,-0.2386975 -0.03711,-0.359375 -6.4e-5,-6.489e-4 6.4e-5,-0.0013 0,-0.00195 -5.2e-4,-0.00526 -0.0014,-0.010382 -0.002,-0.015625 C 16.547545,7.1212906 16.466187,6.756334 16.318361,6.4726562 16.122748,6.0972688 15.824345,5.8183594 15.453126,5.8183594 Z m 0,0.3945312 h 6.7636718 c 0.165627,0 0.355997,0.1388295 0.513672,0.4414063 0.05488,0.1053194 0.09243,0.2455544 0.132813,0.3808593 h 0.0039 a 0.109375,0.30859375 0 0 0 -0.002,0.00781 c -7.33e-4,-0.00247 -0.0012,-0.00535 -0.002,-0.00781 H 8.0527355 a 0.21679688,0.36132813 0 0 0 -0.00781,-0.00781 C 8.0841231,6.8945638 8.1220792,6.757497 8.1757824,6.6542969 8.3332405,6.3517903 8.5224658,6.2128906 8.6894542,6.2128906 Z M 7.982423,7.2929688 c -1.358e-4,6.266e-4 1.354e-4,0.00133 0,0.00195 H 7.900392 Z M 7.912111,7.9667969 c 0.00811,0.00235 0.015068,0.011719 0.023437,0.011719 h 8.296875 c 0,-8.236e-4 1e-6,-0.00115 0,-0.00195 a 0.2265625,0.45507813 0 0 0 0.0039,0.00195 h -0.0039 c 6.9e-5,0.4324177 0.0048,0.7864192 0,1.0253906 -0.0052,0.2603652 -0.0299,0.4158601 -0.05664,0.4726563 -0.02674,0.056796 -0.02484,0.055199 -0.134766,0.072266 -0.109925,0.017066 -0.307681,0.015165 -0.585937,0.013672 h -0.002 -6.7636718 c -0.2807905,-0.00143 -0.4840978,0.00864 -0.5996094,-0.00195 -0.057944,-0.00531 -0.090751,-0.016794 -0.1035156,-0.023437 -0.012765,-0.00664 -0.012443,-0.00404 -0.023437,-0.025391 -0.021989,-0.042706 -0.051842,-0.1940413 -0.056641,-0.4589844 -0.00448,-0.2471623 0.0036,-0.6169669 0.00586,-1.0859375 z M 6.5039074,9.9570312 H 17.572267 c 0.357373,0 0.698425,0.2274728 0.962891,0.6425778 0.117013,0.183664 0.211435,0.40714 0.285156,0.650391 h 0.0098 a 0.29296875,0.45117188 0 0 0 -0.0078,0.0039 c -3.97e-4,-0.0013 -0.0016,-0.0026 -0.002,-0.0039 H 5.2617198 a 0.1875,0.4765625 0 0 0 -0.00586,-0.0078 c 0.073886,-0.24018 0.1693774,-0.460863 0.2851569,-0.642591 0.264466,-0.415105 0.605518,-0.6425778 0.9628907,-0.6425778 z M 5.0878917,12.091797 a 0.1875,0.4765625 0 0 0 0.00195,0.002 h -0.033203 z m 0.019531,0.01758 a 0.1875,0.4765625 0 0 0 0.00586,0.0039 c -4.628e-4,0.0112 -0.00159,0.02196 -0.00195,0.0332 0.042337,0.02817 0.088954,0.04687 0.1386719,0.04687 H 18.853517 c 0.03628,0 0.06921,-0.01308 0.101563,-0.0293 a 0.16992187,0.30566406 0 0 0 0.01172,0.02539 c 0.0018,0.02455 0.0039,0.04877 0.0039,0.07422 a 0.19738824,0.19738824 0 0 0 0,0.002 c 0.0044,0.679452 0.01198,1.175035 -0.0039,1.525391 -0.0159,0.350355 -0.06307,0.54617 -0.11914,0.630859 -0.05607,0.08469 -0.122108,0.118059 -0.328125,0.138672 -0.206016,0.02061 -0.521202,0.0083 -0.949219,0.0098 H 6.5039074 c -0.4167489,-0.0015 -0.7266994,0.02042 -0.9316407,0.0098 C 5.3673255,14.569278 5.3034855,14.542524 5.2500011,14.46875 5.1965171,14.39497 5.1440702,14.20429 5.123048,13.847656 5.102026,13.491023 5.1035167,12.978623 5.1035167,12.263672 c 0,-0.04021 0.00653,-0.07748 0.00781,-0.117188 -0.00368,-0.0024 -0.00616,-0.0071 -0.00977,-0.0098 a 0.09375,0.1171875 0 0 0 0.00586,-0.02734 z m -1.8535156,2.90625 H 20.701173 c 0.352669,0 0.690883,0.227419 0.953125,0.642578 0.103269,0.163487 0.185693,0.360786 0.25586,0.572266 h 0.02148 a 0.36914063,0.46484375 0 0 0 -0.01758,0.01172 c -0.0012,-0.0038 -0.0027,-0.008 -0.0039,-0.01172 H 2.0488293 a 0.11523438,0.19140625 0 0 0 -0.00195,-0.0059 c 0.069879,-0.210462 0.1531806,-0.405895 0.2558594,-0.568359 0.2621988,-0.414955 0.5983539,-0.640625 0.9511719,-0.640625 z m 19.1347659,1.898437 h 0.01172 c -4.41e-4,7.99e-4 -0.0015,0.0012 -0.002,0.002 h -0.01172 a 0.36914063,0.46484375 0 0 1 0.002,-0.002 z M 1.8808605,17.148438 c -6.28e-5,0.0013 6.15e-5,0.0026 0,0.0039 0.042677,0.0085 0.080981,0.02236 0.1328125,0.02148 h 19.982422 c 0.02881,0 0.05458,-0.01089 0.08203,-0.01563 -5.9e-5,-0.0013 6.2e-5,-0.0026 0,-0.0039 a 0.2265625,0.41015625 0 0 0 0.0059,0.002 c -0.0021,3.95e-4 -0.0037,0.0016 -0.0059,0.002 0.0025,0.05527 0.0098,0.107765 0.0098,0.164063 a 0.19738824,0.19738824 0 0 0 0,0.002 c 0.0074,0.712625 0.02981,1.224665 0.0293,1.582031 -5.13e-4,0.357366 -0.03807,0.552245 -0.07813,0.617188 -0.02002,0.03247 -0.03412,0.04502 -0.07813,0.0625 -0.03535,0.01404 -0.106544,0.02348 -0.183594,0.03125 H 12.04297 a 0.29605249,0.29605249 0 0 0 -0.0098,0 H 2.154298 c -0.057357,-0.0087 -0.1209353,-0.01697 -0.1484375,-0.0293 -0.040522,-0.01817 -0.053987,-0.03212 -0.074219,-0.06836 -0.040464,-0.07248 -0.071055,-0.276335 -0.072266,-0.634765 -0.00121,-0.358431 0.01522,-0.866262 0.00977,-1.564454 3.29e-5,-0.05769 0.00911,-0.111352 0.011719,-0.167968 -9.05e-4,-1.79e-4 -0.00105,-0.0018 -0.00195,-0.002 a 0.171875,0.45507813 0 0 0 0.00195,-0.002 z"
   :food "M 12.291016 3.546875 C 7.6519308 3.546875 3.8847656 7.3140398 3.8847656 11.953125 C 3.8847656 16.594008 7.6519939 20.361328 12.291016 20.361328 C 16.931836 20.361328 20.699219 16.593945 20.699219 11.953125 C 20.699219 7.314103 16.931899 3.546875 12.291016 3.546875 z M 12.291016 4.0078125 C 16.682073 4.0078125 20.236328 7.563905 20.236328 11.953125 C 20.236328 16.344245 16.682136 19.898438 12.291016 19.898438 C 7.9017961 19.898438 4.3457031 16.344182 4.3457031 11.953125 C 4.3457031 7.5639682 7.9018592 4.0078125 12.291016 4.0078125 z M 23.773438 4.2382812 C 23.541182 4.2340731 23.345341 4.3696076 23.197266 4.546875 C 23.04919 4.7241424 22.927743 4.954815 22.816406 5.2285156 C 22.593734 5.7759168 22.415368 6.4967378 22.267578 7.2617188 C 21.971999 8.7916806 21.807771 10.489291 21.761719 11.214844 C 21.736004 11.619451 21.856728 11.934179 22.074219 12.125 C 22.29171 12.315821 22.569367 12.374918 22.824219 12.384766 C 23.182672 12.398616 23.349861 12.325822 23.523438 12.275391 L 23.509766 20.820312 A 0.231067 0.231067 0 0 0 23.740234 21.052734 A 0.231067 0.231067 0 0 0 23.972656 20.820312 L 24 4.46875 A 0.23109011 0.23109011 0 0 0 23.773438 4.2382812 z M 0.2421875 4.4511719 A 0.231067 0.231067 0 0 0 0.03125 4.6601562 C 0.03125 4.6601562 -0.067400002 5.7424403 0.0859375 6.8417969 C 0.16260625 7.3914752 0.2999528 7.9490469 0.56445312 8.3945312 C 0.77324014 8.7461805 1.158371 8.9088475 1.5605469 9.015625 L 1.5839844 20.771484 A 0.231067 0.231067 0 0 0 1.8164062 21.001953 A 0.231067 0.231067 0 0 0 2.046875 20.769531 L 2.0234375 9.0527344 C 2.4387583 8.9702795 2.8174527 8.7803362 3.0195312 8.4121094 C 3.2620977 7.9701057 3.3822804 7.41499 3.4472656 6.8652344 C 3.577236 5.7657231 3.4726562 4.6777344 3.4726562 4.6777344 A 0.231067 0.231067 0 0 0 3.2207031 4.46875 A 0.231067 0.231067 0 0 0 3.0136719 4.7207031 C 3.0136719 4.7207031 3.0635999 5.6779068 2.9902344 6.6035156 L 2.5039062 6.6035156 L 2.5039062 4.8613281 A 0.231067 0.231067 0 0 0 2.2714844 4.6289062 A 0.231067 0.231067 0 0 0 2.0410156 4.8613281 L 2.0410156 6.6035156 L 1.4785156 6.6035156 L 1.4785156 4.84375 A 0.231067 0.231067 0 0 0 1.2480469 4.6132812 A 0.231067 0.231067 0 0 0 1.0175781 4.84375 L 1.0175781 6.6035156 L 0.5390625 6.6035156 C 0.4412614 5.6634792 0.4921875 4.7011719 0.4921875 4.7011719 A 0.231067 0.231067 0 0 0 0.28125 4.4511719 A 0.231067 0.231067 0 0 0 0.2421875 4.4511719 z M 23.537109 4.8691406 L 23.525391 11.814453 C 23.414685 11.848046 23.163822 11.936271 22.841797 11.923828 C 22.648148 11.916346 22.48276 11.868702 22.380859 11.779297 C 22.278958 11.689892 22.203081 11.552143 22.222656 11.244141 C 22.267183 10.542624 22.431221 8.8480083 22.720703 7.3496094 C 22.865444 6.6004099 23.04269 5.8975741 23.244141 5.4023438 C 23.340308 5.165934 23.442807 4.9876942 23.537109 4.8691406 z M 12.289062 5.7949219 C 8.9143866 5.7949219 6.171875 8.5376084 6.171875 11.914062 C 6.171875 15.288652 8.9126086 18.03125 12.289062 18.03125 C 15.665429 18.03125 18.408203 15.290517 18.408203 11.914062 C 18.408203 8.5393853 15.66545 5.796791 12.289062 5.7949219 z M 12.289062 6.2578125 C 15.415819 6.2595434 17.945313 8.7892917 17.945312 11.914062 C 17.945313 15.040752 15.41584 17.568359 12.289062 17.568359 C 9.162373 17.568359 6.6347656 15.038921 6.6347656 11.914062 C 6.6347656 8.7873726 9.164293 6.2578125 12.289062 6.2578125 z M 0.63085938 7.0664062 L 1.2480469 7.0664062 L 2.9199219 7.0664062 C 2.8520261 7.4821736 2.7727976 7.9042952 2.6152344 8.1914062 C 2.4221244 8.5432905 2.1981804 8.7277349 1.8339844 8.7207031 A 0.23109011 0.23109011 0 0 0 1.8300781 8.7207031 C 1.4276287 8.7168813 1.1728391 8.5150981 0.9609375 8.1582031 C 0.79341118 7.8760471 0.70871955 7.4666423 0.63085938 7.0664062 z "
   :party "M 2.7363281 1.2011719 A 0.145059 0.145059 0 0 0 2.6464844 1.2421875 A 0.145059 0.145059 0 0 0 2.6484375 1.4472656 C 2.6484375 1.4472656 2.8915401 1.6828614 3.2382812 1.9921875 A 0.1450736 0.1450736 0 0 0 3.234375 2.0019531 L 1.9394531 6.078125 A 0.1450736 0.1450736 0 0 0 2.15625 6.2421875 L 5.6992188 3.9101562 C 5.869875 4.0288012 6.0293394 4.1459943 6.2109375 4.265625 L 5.4101562 8.4042969 A 0.1450736 0.1450736 0 0 0 5.6464844 8.5429688 L 8.9257812 5.7851562 C 9.1557969 5.893032 9.3821113 6.0027159 9.6191406 6.1015625 L 9.6328125 10.333984 A 0.1450736 0.1450736 0 0 0 9.890625 10.423828 L 12.597656 7.0605469 A 0.1450736 0.1450736 0 0 0 12.623047 7.015625 C 12.867099 7.0655914 13.110521 7.0979388 13.355469 7.1386719 L 14.195312 11.285156 A 0.1450736 0.1450736 0 0 0 14.466797 11.324219 L 16.462891 7.4960938 A 0.1450736 0.1450736 0 0 0 16.476562 7.4570312 C 19.593456 7.575835 22.232406 7.1800599 22.832031 7.0839844 C 22.644328 7.2099384 22.292699 7.4498502 21.759766 7.7871094 L 21.746094 7.7949219 C 21.21424 8.1312863 20.50688 8.5622113 19.599609 9.0761719 C 17.475458 10.279486 14.857357 11.567521 12.939453 11.910156 C 11.666725 12.138003 10.032148 12.135285 8.4160156 12.041016 L 6.7089844 11.908203 C 6.4716757 11.885064 6.2227941 11.867201 5.9941406 11.841797 C 3.7299016 11.590235 1.9550781 11.251953 1.9550781 11.251953 A 0.14507351 0.14507351 0 0 0 1.8027344 11.46875 C 1.8027344 11.46875 2.0064141 11.785747 2.2421875 12.130859 L 0.021484375 15.748047 A 0.1450736 0.1450736 0 0 0 0.19335938 15.960938 L 4.2246094 14.537109 C 4.364471 14.683168 4.507713 14.827853 4.6582031 14.974609 L 3.15625 18.957031 A 0.1450736 0.1450736 0 0 0 3.3652344 19.132812 L 7.09375 16.951172 A 0.1450736 0.1450736 0 0 0 7.1171875 16.933594 C 7.2916574 17.041148 7.467248 17.147721 7.6484375 17.246094 L 7.5878906 21.509766 A 0.1450736 0.1450736 0 0 0 7.84375 21.603516 L 10.609375 18.287109 A 0.1450736 0.1450736 0 0 0 10.619141 18.273438 C 10.867333 18.318746 11.116971 18.357567 11.369141 18.388672 L 12.710938 22.433594 A 0.1450736 0.1450736 0 0 0 12.984375 22.439453 L 14.476562 18.480469 C 14.720647 18.468102 14.947105 18.446967 15.183594 18.427734 L 17.005859 22.208984 A 0.1450736 0.1450736 0 0 0 17.279297 22.177734 L 18.261719 18.003906 C 19.257814 17.807701 19.925781 17.628906 19.925781 17.628906 A 0.145059 0.145059 0 0 0 20.025391 17.451172 A 0.145059 0.145059 0 0 0 19.847656 17.349609 C 19.847656 17.349609 18.417244 17.742709 16.466797 18 L 16.066406 18.048828 C 15.296753 18.138751 14.459052 18.189234 13.599609 18.199219 L 12.498047 18.191406 C 11.573153 18.146524 10.653001 18.022238 9.7871094 17.789062 L 8.4296875 17.308594 C 6.409331 16.400781 4.7955582 14.837648 3.71875 13.5625 L 3.4199219 13.199219 C 2.7719953 12.391447 2.3589395 11.749524 2.2597656 11.589844 C 2.538603 11.641754 3.888145 11.900351 5.9628906 12.130859 C 6.0859185 12.144528 6.2219808 12.152915 6.3476562 12.166016 L 7.3769531 16.214844 A 0.1450736 0.1450736 0 0 0 7.6484375 16.240234 L 9.4238281 12.382812 C 9.6412052 12.389103 9.8478331 12.383409 10.0625 12.384766 L 11.763672 16.306641 A 0.1450736 0.1450736 0 0 0 12.035156 16.289062 L 13.191406 12.148438 C 13.417815 12.102085 13.649218 12.049851 13.888672 11.982422 L 16.578125 15.240234 A 0.1450736 0.1450736 0 0 0 16.833984 15.146484 L 16.794922 10.849609 C 16.965763 10.76994 17.134341 10.686556 17.304688 10.603516 A 0.1450736 0.1450736 0 0 0 17.322266 10.623047 L 20.515625 13.470703 A 0.1450736 0.1450736 0 0 0 20.753906 13.337891 L 20.068359 9.1347656 C 20.252755 9.0283844 20.37216 8.9489776 20.546875 8.8457031 L 23.761719 11.535156 A 0.1450736 0.1450736 0 0 0 23.998047 11.396484 L 23.179688 7.2226562 C 23.256968 7.1709224 23.523438 6.9980469 23.523438 6.9980469 A 0.14507351 0.14507351 0 0 0 23.416016 6.734375 C 23.416016 6.734375 16.289888 7.9582261 11.03125 6.3144531 C 9.9682078 5.9819748 8.9535238 5.5162941 8.015625 5.0058594 L 7.5566406 4.7460938 C 4.7999969 3.1552342 2.8515625 1.2421875 2.8515625 1.2421875 A 0.145059 0.145059 0 0 0 2.7363281 1.2011719 z M 3.4492188 2.2832031 L 5.4296875 3.7382812 L 2.3398438 5.7753906 L 3.4492188 2.2832031 z M 9.9101562 6.2578125 L 12.242188 7.0410156 L 9.921875 9.9238281 L 9.9101562 6.2578125 z M 22.921875 7.4199219 L 23.634766 11.050781 L 20.822266 8.6992188 L 22.921875 7.4199219 z M 16.505859 11.039062 L 16.541016 14.740234 L 14.207031 11.912109 L 16.505859 11.039062 z M 6.6523438 12.195312 C 7.223618 12.251557 7.8022907 12.295056 8.3984375 12.330078 L 9.1035156 12.384766 L 7.5566406 15.746094 L 6.6523438 12.195312 z M 4.8652344 15.244141 L 6.7675781 16.804688 L 3.5722656 18.675781 L 4.8652344 15.244141 z M 11.705078 18.476562 L 12.404297 18.480469 C 12.897047 18.5077 13.379736 18.501259 13.863281 18.490234 L 14.164062 18.492188 L 12.857422 21.955078 L 11.705078 18.476562 z "
   :end "M 4.3730469 2.3007812 C 3.1655987 2.2928636 2.1218181 2.6221604 1.2890625 3.296875 C 0.45506795 3.9709533 0.012299553 4.8546471 0 5.8730469 L 0 5.875 C -0.0046372873 6.5011109 0.27367836 7.5745913 0.63671875 8.1367188 C 1.2549485 9.0967038 2.4163254 10.732682 3.6914062 12.119141 C 4.5527077 13.051585 5.7778073 14.358793 6.7890625 15.431641 C 7.2946901 15.968064 7.7471801 16.445307 8.0742188 16.789062 C 8.2377379 16.96094 8.3685785 17.099564 8.4609375 17.195312 C 8.507117 17.243187 8.5441924 17.280255 8.5703125 17.306641 C 8.5833725 17.319834 8.5936365 17.330357 8.6035156 17.339844 C 8.6084552 17.344587 8.6124214 17.347927 8.6210938 17.355469 C 8.6254298 17.35924 8.6440437 17.372697 8.6445312 17.373047 C 8.644775 17.373222 8.6834456 17.398364 8.6835938 17.398438 C 8.6837374 17.398508 8.9286378 17.391114 8.9433594 17.390625 C 8.9654285 17.378027 8.9881868 17.365311 8.9882812 17.365234 C 8.9884464 17.365101 8.9994614 17.355757 9.0019531 17.353516 C 9.0069366 17.349032 9.0075385 17.347849 9.0097656 17.345703 C 9.01422 17.341411 9.0192061 17.338224 9.0234375 17.333984 C 9.0319004 17.325506 9.0409184 17.312909 9.0546875 17.298828 C 9.0822257 17.270666 9.121522 17.231708 9.171875 17.179688 C 9.272581 17.075645 9.4172785 16.925335 9.5957031 16.740234 C 9.9525524 16.370034 10.444581 15.858389 10.990234 15.292969 C 11.027963 15.253873 11.065299 15.21732 11.103516 15.177734 C 11.561396 15.794685 12.083887 16.454807 12.648438 17.068359 L 12.648438 17.070312 C 13.365827 17.846457 14.386149 18.934366 15.228516 19.828125 C 15.649699 20.275005 16.026579 20.672728 16.298828 20.958984 C 16.434953 21.102112 16.544562 21.217489 16.621094 21.296875 C 16.659364 21.336565 16.690027 21.367522 16.710938 21.388672 C 16.721397 21.399242 16.727875 21.405849 16.734375 21.412109 C 16.737675 21.415209 16.740441 21.418575 16.744141 21.421875 C 16.745941 21.423475 16.753506 21.427434 16.753906 21.427734 C 16.754111 21.427882 16.765495 21.4374 16.765625 21.4375 C 16.76575 21.437563 16.851512 21.437522 16.851562 21.4375 C 16.851608 21.437478 16.870964 21.423938 16.871094 21.423828 C 16.871226 21.423714 16.8743 21.420622 16.875 21.419922 C 16.8765 21.418522 16.877806 21.419095 16.878906 21.417969 L 16.886719 21.410156 C 16.892919 21.403856 16.900879 21.394362 16.912109 21.382812 C 16.934579 21.359713 16.967966 21.326503 17.009766 21.283203 C 17.093356 21.196613 17.212761 21.070295 17.361328 20.916016 C 17.658463 20.607456 18.06852 20.182191 18.523438 19.710938 C 19.433273 18.768429 20.52233 17.644509 21.244141 16.917969 C 22.371099 15.787196 23.109858 14.668883 23.498047 13.980469 C 23.890718 13.285595 24.087887 12.607715 24.09375 11.945312 L 24.09375 11.943359 C 24.09765 11.192867 23.75392 10.535915 23.083984 9.9941406 C 22.411266 9.4536327 21.579676 9.1776797 20.609375 9.171875 C 19.644979 9.164145 18.784152 9.4526148 18.039062 10.033203 C 17.536112 10.430844 17.164354 11.029545 16.878906 11.751953 C 16.591816 11.084729 16.243234 10.534696 15.808594 10.138672 C 16.324803 9.455857 16.720526 8.8395803 16.978516 8.3828125 C 17.461405 7.5293792 17.712638 6.6822099 17.71875 5.8554688 C 17.724998 4.9016442 17.277142 4.0554776 16.443359 3.3828125 C 15.605194 2.7062207 14.564473 2.3657423 13.371094 2.3574219 L 13.369141 2.3574219 C 12.177338 2.345902 11.101589 2.7054616 10.179688 3.4238281 L 10.179688 3.4257812 L 10.177734 3.4257812 C 9.613234 3.8699228 9.2309805 4.5708328 8.890625 5.328125 C 8.5146666 4.5455335 8.1015544 3.8276069 7.5273438 3.3789062 C 6.6353551 2.6693243 5.5681412 2.3107379 4.375 2.3007812 L 4.3730469 2.3007812 z M 4.3691406 2.8691406 C 5.4528654 2.8781841 6.3779976 3.1926848 7.171875 3.8242188 L 7.1738281 3.8242188 L 7.1757812 3.8261719 C 7.7652541 4.286205 8.2503333 4.9762322 8.6289062 5.9199219 L 8.9082031 6.6132812 L 9.1601562 5.9101562 C 9.4873909 5.0011721 9.9476711 4.330662 10.529297 3.8730469 C 11.357145 3.2279695 12.288549 2.9149968 13.365234 2.9257812 C 14.455445 2.9330353 15.354322 3.2320605 16.087891 3.8242188 C 16.822532 4.4168996 17.155509 5.070271 17.150391 5.8515625 C 17.145103 6.5667272 16.92966 7.3145898 16.484375 8.1015625 L 16.484375 8.1035156 C 16.238067 8.5396018 15.855292 9.1357302 15.355469 9.796875 C 14.700761 9.3660325 13.953424 9.1336813 13.113281 9.1269531 C 12.131708 9.1192393 11.296644 9.384577 10.628906 9.9238281 C 9.9615092 10.464751 9.6172245 11.150975 9.609375 11.962891 L 9.609375 11.964844 C 9.607315 12.42699 9.8496542 13.354752 10.117188 13.769531 C 10.274802 14.013863 10.538665 14.374388 10.771484 14.703125 C 10.706699 14.770224 10.645498 14.832672 10.582031 14.898438 C 10.036134 15.464111 9.5441842 15.975674 9.1875 16.345703 C 9.0281665 16.510998 8.9063438 16.635246 8.8085938 16.736328 C 8.7216688 16.64588 8.6212424 16.540348 8.484375 16.396484 C 8.1583179 16.053761 7.7063537 15.576967 7.2011719 15.041016 C 6.1908083 13.969114 4.9680366 12.663961 4.109375 11.734375 C 2.8689158 10.385562 1.7149356 8.7623718 1.1132812 7.828125 C 0.88910969 7.4810204 0.56542065 6.2756813 0.56835938 5.8789062 C 0.57879981 5.01444 0.91963289 4.3257609 1.6464844 3.7382812 C 2.3707887 3.151436 3.2656248 2.8619044 4.3691406 2.8691406 z "
   :beer "M17 21.224v-12.772c1.106-.594 1.674-1.762 1.674-3.104 0-1.874-1.473-3.411-3.32-3.515-.768-1.068-2.221-1.833-3.739-1.833-.971 0-1.78.322-2.582.964-1.292-.422-2.747-.143-3.795.792-2.155-.342-4.238 1.244-4.238 3.501 0 1.396.819 2.581 2 3.15v12.817c0 .664-.336 1.203-1 1.203v1.573h16v-1.573c-.664 0-1-.539-1-1.203zm-9-.224h-2v-12.719c.672.422 1.516.406 2 .267v12.452zm7.154-13.707c-.627 0-1.184-.296-1.539-.756l-.451.316c-1.522 1.178-.113 3.303-.01 4.324.102.977-.505 1.712-1.458 1.712-.93 0-1.475-.786-1.401-1.712.078-.978 1.562-2.918-.083-4.438l-.623-.568c-.425.497-1.056.813-1.761.813-.605 0-1.155-.231-1.568-.611-.354.487-.927.804-1.575.804-2.716 0-2.817-3.889 0-3.889.398 0 .77.12 1.077.326.384-.751 1.163-1.266 2.065-1.266.591 0 1.131.222 1.54.586.494-.814 1.39-1.359 2.412-1.359 1.255 0 2.32.82 2.685 1.955.213-.082.445-.126.689-.126 1.072 0 1.943.871 1.943 1.944s-.869 1.945-1.942 1.945zm7.846 5.159c0 2.539-1.791 5.75-5 6.963v-2.16c3.154-1.83 3.969-6.255 1.553-6.255h-1.553v-2h1.912c2.144 0 3.088 1.534 3.088 3.452z"
   :wine "m 0,0 v 8 c 0,3.96 2.88,7.24 6.666667,7.88 v 5.453333 H 2.6666667 V 24 H 13.333333 v -2.666667 h -4 V 15.88 C 13.12,15.24 16,11.96 16,8 V 0 Z m 8,13.333333 c -2.48,0 -4.5466667,-1.706666 -5.1466667,-4 H 13.146667 c -0.6,2.293334 -2.666667,4 -5.146667,4 z M 13.333333,6.6666667 H 2.6666667 v -4 H 13.333333 Z"
   :soda "M17 24h-10l-2-16h14l-2 16zm-6.25-5.5c.414 0 .75.336.75.75s-.336.75-.75.75-.75-.336-.75-.75.336-.75.75-.75zm3.25-2.5c.552 0 1 .448 1 1s-.448 1-1 1-1-.448-1-1 .448-1 1-1zm-3.5-3c.828 0 1.5.672 1.5 1.5s-.672 1.5-1.5 1.5-1.5-.672-1.5-1.5.672-1.5 1.5-1.5zm1.685-9l2.072-4 1.359.634-1.776 3.366h4.199c0 .922 1.092 1.618 1.961 1.618v1.382h-16v-1.382c.87 0 2-.697 2-1.618h6.185z"})

(defn icon [{:keys [name]}]
  [:path {:d (icons name)}])

(def lang :de)

(def margin {:top 80 :bottom 80 :left 110 :right 110})

(defn time-entry [{:keys [time label icon-name idx height]}]
  (let [item-height (/ height (count @time-table))
        text-size 19]
    [:g {:transform (translate 0 (* item-height idx))}
     [:g {:transform (scale 2)}
      [icon {:name icon-name}]]
     [:g {:transform (translate 0 (/ item-height 2))}
      [:line {:x1 80 :x2 120 :stroke "black"}]]
     [:g {:transform (translate 145 25)}
      [:text {:style {:font-size text-size}} time]
      [:text {:style {:font-size text-size} :y 22}
       (get-in @dict [lang label])]]]))

(defn time-entry2 [{:keys [time label icon-name idx height is-last width]}]
  (let [text-width (r/atom nil)]
    (fn []
      (let [item-height (/ height (count @time-table))
            text-size 16
            even (= (mod idx 2) 0)
            text (get-in @dict [lang label])]
        [:g {:transform (translate 0 (* item-height idx))}
         (if even
           [:g {:transform (translate 180 8)}
            [:g {:transform (tr-and (translate (- -40 @text-width) -18) (scale 1.3))}
             [icon {:name icon-name}]]
            [:text {:style {:font-size text-size :dominant-baseline "middle"
                            :text-anchor "end"}
                    :x 0 :ref (fn [ref]
                                  (when ref
                                    (reset! text-width (.-width ^js (.getBBox ref)))))}
             text]
            [:line {:stroke "black" :x1 0 :x2 (- -40 @text-width) :y1 20 :y2 20}]
            [:line {:stroke "black" :x1 0 :x2 -10 :y1 20 :y2 14}]
            [:line {:stroke "black" :x1 0 :x2 -10 :y1 20 :y2 26}]]
           [:g {:transform (translate (+ (/ width 2) 35) 8)}
            [:g {:transform (tr-and (translate (+ @text-width 5) -18) (scale 1.3))}
             [icon {:name icon-name}]]
            [:text {:style {:font-size text-size :dominant-baseline "middle"}
                    :x 0 :ref (fn [ref]
                                (when ref
                                  (reset! text-width (.-width ^js (.getBBox ref)))))}
             text]
            [:line {:stroke "black" :x1 0 :x2 (+ @text-width 43) :y1 20 :y2 20}]
            [:line {:stroke "black" :x1 0 :x2 10 :y1 20 :y2 14}]
            [:line {:stroke "black" :x1 0 :x2 10 :y1 20 :y2 26}]])
         [:g {:transform (translate (/ width 2) (/ item-height 2))}
          [:text {:style {:font-size text-size}
                  :text-anchor "middle"}
           time]
          (when-not is-last
            [:line {:y1 9 :y2 40 :stroke "black"}])]]))))
(def variant2-element (r/atom nil))

(defn download-button [_ children]
  [:button.shadow-2.pointer.bn.pv2.ph3.br3.grow.outline-0.mb1
          {:style {:bottom 0 :background-color "#F3F4F6" }
           :on-click (fn []
                       (let [el (.createElement js/document "a")]
                         (.setAttribute el "href" (str "data:text/plain;charset=utf-8," (js/encodeURIComponent (.-outerHTML @variant2-element))))
                         (.setAttribute el "download" "sketch.svg")
                         (set! (.-style.display el) "none")
                         (.appendChild js/document.body el)
                         (.click el)
                         (.removeChild js/document.body el)))}
          [:span {:style {:font-size 32 :color "#111827"}} children]])

(defn bottle-tag []
  (let [width (* 9 50)
        height (* 11 50)]
    [:g {:width width :height height}
     (let [margin {:top 50 :bottom 100 :left 110 :right 110}]
       [:g {:transform (translate (:left margin) (:top margin))}
        (let [height (- height (:top margin) (:bottom margin))
              width (- width (:left margin) (:right margin))
              item-height (/ height (count @time-table))]
          [:<>
           [:g {:transform "translate(70, 255) scale(0.5)"}
            [:g {:transform "translate(0, 430) scale(0.1)"}
             [divider-2]]
            [:g {:transform "scale(-1,1) translate(-340, 428) scale(0.1)"}
             [divider-2]]]
           [:text.fw6.festive.f1 {:x 150
                   :y -10
                   :text-anchor "middle"}
            "Tagesablauf"]
           [:g {:transform (translate 0 25)}
            [:g {:transform (translate 100 0)}
             [:line {:y1 (/ item-height 2)
                     :y2 (- height (/ item-height 2))
                     :stroke "black"}]]
            (doall
             (map-indexed
              (fn [idx {:keys [time label icon-name]}]
                [time-entry {:key idx :time time
                             :height height
                             :idx idx
                             :is-last (not= idx (dec (count @time-table)))
                             :label label :icon-name icon-name} ])
              @time-table))]])])]))

(def beers ["Helles"
            "Weißbier"
            "Mooser Liesl"
            "Radler"
            "Russn"
            "Cola-Weizen"
            "Urfass alkoholfrei"])

(def wines ["Hauswein rot - Zweigelt"
            "Hauswein weiß - grüner Veltliner"])

(def sodas ["Wasser"
            "Orangenlimo"
            "Zitronenlimo"
            "Spezi"
            "Cola"
            "Cola light"
            "Schorlen: Trauben, Apfel,"
            "Orangen, Johannisbeer"])

(defn drinks [{:keys [x]} d]
  [:<>
   (map-indexed
    (fn [idx t]
      ^{:key idx}
      [:text {:text-anchor "middle" :x x :y (+ 35 (* idx 30))} t])
    d)])

(defn drink-tag []
  (let [width (* 9 50)
        height (* 11 50)]
    [:g {:width width :height height}
     [:text.fw6.festive.f1 {:x (+ 35 (/ width 2))
                            :y 50
                            :text-anchor "middle"}
      "Getränke"]
     [:g {:transform "translate(100, 120)"}
      [:g {:transform "translate(63, -22)"}
       [icon {:name :beer}]]
      [:text.f3.fw6 "Biere"]
      [drinks {:x 40} beers]]
     [:g {:transform "translate(300, 120)"}
      [:g {:transform "translate(130, -22)"}
       [icon {:name :soda}]]
      [:text.f3.fw6 "Alkoholfrei"]
      [drinks {:x 80}sodas]]
     [:g {:transform "translate(220, 420)"}
      [:g {:transform "translate(75, -21)"}
       [icon {:name :wine}]]
      [:text.f3.fw6 "Weine"]
      [drinks {:x 50}wines]]
     [:g {:transform "translate(180, 310) scale(0.5)"}
      [:g {:transform "translate(0, 430) scale(0.1)"}
       [divider-2]]
      [:g {:transform "scale(-1,1) translate(-340, 428) scale(0.1)"}
       [divider-2]]]]))

(defn main []
  (load-private-dict)
  (load-time-table)
  (fn []
    (when (and @dict @time-table)
      [:div.w-100
       [:div.flex.justify-between.w-100
        [:div
         [drawing-canvas {:width width :height height}
          [:svg
           {:xmlns "http://www.w3.org/2000/svg"
            :width width :height height
            :style {:fontFamily "Playfair Display"}
            :ref (fn [el] (when el (reset! variant2-element el)))}
           #_[:rect {:x 0 :y 0 :width width :height (* 1.5 50) :stroke "black" :fill "none"}]
           #_[:rect {:x 0 :y 0 :width (* 0.5 50) :height height :stroke "black" :fill "none"}]
           #_[:rect {:x (- width (* 0.4 50)) :y 0 :width (* 0.5 50) :height height :stroke "black" :fill "none"}]
           #_[:rect {:x 0 :y (* (+ 13 1.5) 50) :width width :height (* 0.7 50) :stroke "black" :fill "none"}]
           #_[:rect {:x 0 :y (- height (* 1.5 50)) :width width :height (* 1.5 50) :stroke "black" :fill "none"}]
           #_[:rect {:x (* 10.5 50) :y 0 :width 1 :height height :stroke "black" :fill "none"}]
           (let [left 20
                 top 30]
             [:<>
              [:g {:transform (translate left (+ 100 top))}
               [drink-tag]]
              [:g {:transform (translate (+ left (* 10 50)) (+ 100 top))}
               [drink-tag]]
              [:g {:transform (translate left (+ 100 (+ (* 13 50) (* 0.7 50)) top))}
               [drink-tag]]
              [:g {:transform (translate (+ left (* 10 50)) (+ 100 (+ (* 13 50) (* 0.7 50) top)))}
               [drink-tag]]])]
          ]
         #_[:div.flex.justify-center.mt3
            [download-button
             {}
             "Download"]]]]])))
